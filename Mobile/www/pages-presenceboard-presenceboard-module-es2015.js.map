{"version":3,"sources":["./src/app/pages/presenceboard/presenceboard.page.html","./src/app/functions/call.ts","./src/app/functions/serializer.ts","./src/app/pages/presenceboard/presenceboard-routing.module.ts","./src/app/pages/presenceboard/presenceboard.module.ts","./src/app/pages/presenceboard/presenceboard.page.scss","./src/app/pages/presenceboard/presenceboard.page.ts"],"names":[],"mappings":"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","file":"pages-presenceboard-presenceboard-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"navbar-theme\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button color=\\\"light\\\" defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"light\\\">Presence</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <div>\\n    <div *ngFor=\\\"let pres of (this.present); let i = index\\\">\\n      <ion-card (click)=\\\"selectPlayer(0, i)\\\" class=\\\"clickable\\\">\\n        <app-smallplayer pres=\\\"0\\\" [img]=\\\"pres.image\\\" [first]=\\\"pres.first\\\" [last]=\\\"pres.last\\\" [role]=\\\"pres.role\\\" [late]=\\\"pres.late\\\"></app-smallplayer>\\n      </ion-card>\\n    </div>\\n    <div *ngFor=\\\"let may of (this.maybe); let i = index\\\">\\n      <ion-card (click)=\\\"selectPlayer(1, i)\\\" class=\\\"clickable\\\">\\n        <app-smallplayer pres=\\\"1\\\" [img]=\\\"may.image\\\" [first]=\\\"may.first\\\" [last]=\\\"may.last\\\" [role]=\\\"may.role\\\"></app-smallplayer>\\n      </ion-card>\\n    </div>\\n    <div *ngFor=\\\"let abs of (this.absent); let i = index\\\">\\n      <ion-card (click)=\\\"selectPlayer(2, i)\\\" class=\\\"clickable\\\">\\n        <app-smallplayer pres=\\\"2\\\" [img]=\\\"abs.image\\\" [first]=\\\"abs.first\\\" [last]=\\\"abs.last\\\" [role]=\\\"abs.role\\\"></app-smallplayer>\\n      </ion-card>\\n    </div>\\n  </div>\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\";","import { HttpClient } from '@angular/common/http';\nimport { serialize } from './serializer';\nimport { get, remove } from './storage';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\n\n\nexport async function call(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }else{\n                setTimeout(() => {\n                    resolve(\"error\")\n                }, 1000)\n            }\n        }\n        let complete = url;\n        if (object != {}){\n            complete += \"?\" + serialize(object);\n        }\n\n        request.open(\"GET\", complete);\n        if (object.token){\n            console.log(object.token);\n            \n            request.setRequestHeader(\"Auth\", object.token);\n            delete object.token;\n        }\n        request.send();\n    });\n    return response as string;\n}\nexport async function post(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }\n        }\n        request.open(\"POST\", url + \"?\" + serialize(object));\n\n        if (object.token){\n            request.setRequestHeader(\"auth\", object.token);\n            delete object.token;\n        }\n        request.send(null);\n    });\n    return response as string;\n}\n    \nexport async function upload(url, imagePath, object, http, transfer): Promise<string>{\n    let response = await new Promise(async (resolve) => { \n        if (imagePath == \"\"){\n            let result = await post(url, object);\n            resolve(result)\n        }else{\n            const fileTransfer: FileTransferObject = transfer.create();\n            const uploadOpts: FileUploadOptions = {\n                fileKey: 'image',\n                httpMethod:'POST',\n                fileName: new Date().getTime() + Math.random() + Math.random() + \".jpg\",\n                chunkedMode: false,\n            };\n            if (object.token){\n                uploadOpts.headers = {auth: object.token};\n                delete object.token;\n            }\n            fileTransfer.upload(imagePath, url + \"?\" + serialize(object), uploadOpts).then((data) => {\n                if (data.response){\n                    resolve(data.response);\n                }\n            }, (err) => {\n                resolve(err);\n            });\n        }\n    });\n    return response as string;\n}\n\nexport async function logout(){\n    let token = await get(\"token\");\n    await call(\"http://192.168.2.251:3000/api/logout\", {token: token});\n    await remove(\"token\");\n    await remove(\"role\");\n}","export function serialize(obj){\n    var str = \"\";\n    for (var key in obj) {\n        if (str != \"\") {\n            str += \"&\";\n        }\n        str += key + \"=\" + encodeURIComponent(obj[key]);\n    }\n    return str;\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PresenceboardPage } from './presenceboard.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PresenceboardPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PresenceboardPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PresenceboardPageRoutingModule } from './presenceboard-routing.module';\n\nimport { PresenceboardPage } from './presenceboard.page';\nimport { SmallplayerComponent, SmallplayerModule } from 'src/app/components/smallplayer/smallplayer.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PresenceboardPageRoutingModule,\n    SmallplayerModule\n  ],\n  declarations: [PresenceboardPage]\n})\nexport class PresenceboardPageModule {}\n","export default \".clickable:active {\\n  -webkit-filter: brightness(0.95);\\n          filter: brightness(0.95);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZHJpZW50cmFoYW4vRGVza3RvcC9UZWFtY2xhcC9UZWFtQ2xhcC9zcmMvYXBwL3BhZ2VzL3ByZXNlbmNlYm9hcmQvcHJlc2VuY2Vib2FyZC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3ByZXNlbmNlYm9hcmQvcHJlc2VuY2Vib2FyZC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQ0FBQTtVQUFBLHdCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wcmVzZW5jZWJvYXJkL3ByZXNlbmNlYm9hcmQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNsaWNrYWJsZTphY3RpdmV7XG4gICAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOTUpO1xufSIsIi5jbGlja2FibGU6YWN0aXZlIHtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOTUpO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { get } from 'src/app/functions/storage';\nimport { call } from 'src/app/functions/call';\nimport { serialize } from 'src/app/functions/serializer';\n\n@Component({\n  selector: 'app-presenceboard',\n  templateUrl: './presenceboard.page.html',\n  styleUrls: ['./presenceboard.page.scss'],\n})\nexport class PresenceboardPage implements OnInit {\n  state = \"Present\";\n  params : any = {};\n  maybe = [];\n  present = [];\n  absent = [];\n  nextPresence = 0;\n  nextAbsence = 0;\n  nextMaybe = 0;\n  exceededPres = false;\n  exceededMay = false;\n  exceededAbs = false;\n  constructor(private router: Router, private route: ActivatedRoute) {\n    this.route.queryParams.subscribe((queryParams) => {\n      if (queryParams && queryParams.eventId){\n        this.params = queryParams;\n      }else{\n      }\n    })\n  }\n\n  ngOnInit() {\n    this.load();\n  }\n  async load(){\n\n    this.exceededPres = false;\n    this.exceededMay = false;\n    this.exceededAbs = false;\n    this.nextPresence = 0;\n    this.present = [];\n    await this.getPresentPlayers();\n    this.nextMaybe = 0;\n    this.maybe = [];\n    if (this.present.length  < 15){\n      await this.getMaybePlayers();\n    }\n    this.nextAbsence = 0;\n    this.absent = [];\n    if (this.present.length + this.maybe.length < 15){\n      await this.getAbsentPlayers();\n    }\n  }\n  async getPresentPlayers(){\n    let token = await get(\"token\");\n    let obj : any = {token: token, id: this.params.teamId, eventId: this.params.eventId, nextPresence: this.nextPresence};\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId;\n    }\n    let result : any= await call(\"http://192.168.2.251:3000/api/getPresence\", obj);\n    try{\n      result = JSON.parse(result);\n      if (result.error){throw result.error;};\n      for (var i = 0; i < result.length; i++){\n        this.present.push(result[i]);\n      }\n      if (result.length == 0){\n        this.nextMaybe = 0;\n        this.maybe = [];\n        await this.getMaybePlayers();\n        this.exceededPres = true;\n      }else{\n        this.nextPresence += result.length;\n      }\n      \n    }catch(error){\n    }\n  }\n  async getAbsentPlayers(){\n    let token = await get(\"token\");\n    let obj : any = {token: token, id: this.params.teamId, eventId: this.params.eventId, nextAbsence: this.nextAbsence};\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId;\n    }\n    let result : any= await call(\"http://192.168.2.251:3000/api/getAbsence\", obj);\n    try{\n      result = JSON.parse(result);\n      if (result.error){throw result.error;};\n      for (var i = 0; i < result.length; i++){\n        this.absent.push(result[i]);\n      }\n      this.nextAbsence += result.length;\n    }catch(error){\n      \n    }\n  }\n  async getMaybePlayers(){\n    let token = await get(\"token\");\n    let obj : any = {token: token, id: this.params.teamId, eventId: this.params.eventId, nextMaybe: this.nextMaybe};\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId;\n    }\n    let result : any= await call(\"http://192.168.2.251:3000/api/getMaybe\", obj);\n    try{\n      result = JSON.parse(result);\n      if (result.error){throw result.error;};\n      for (var i = 0; i < result.length; i++){\n        this.maybe.push(result[i]);\n      }\n      \n      if (result.length == 0){\n        this.nextAbsence = 0;\n        this.absent = [];\n        await this.getAbsentPlayers();\n        this.exceededMay = true;\n      }else{\n        this.nextMaybe += result.length;\n      }\n    }catch(error){\n      \n    }\n  }\n  async loadData(event){\n    if (!this.exceededPres){\n      await this.getPresentPlayers();\n    }else if (!this.exceededMay){\n      await this.getMaybePlayers();\n    }else if (!this.exceededAbs){\n      await this.getAbsentPlayers();\n    }\n    event.target.complete();\n  }\n  async refresh(event){\n    this.load();\n    event.target.complete();\n  }\n  selectPlayer(pres, index){\n    let obj : any = {\n      teamId: this.params.teamId\n    };\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId\n    }\n    if (pres == 0){\n      obj.player = this.present[index].id;\n    }else if (pres == 1){\n      obj.player = this.maybe[index].id;\n    }else if (pres == 2){\n      obj.player = this.absent[index].id;\n    }\n    this.router.navigateByUrl(\"/player-profile?\" + serialize(obj));\n  }\n}\n"],"sourceRoot":"webpack:///"}