{"version":3,"sources":["webpack:///src/app/pages/presenceboard/presenceboard.page.html","webpack:///src/app/functions/call.ts","webpack:///src/app/functions/serializer.ts","webpack:///src/app/pages/presenceboard/presenceboard-routing.module.ts","webpack:///src/app/pages/presenceboard/presenceboard.module.ts","webpack:///src/app/pages/presenceboard/presenceboard.page.scss","webpack:///src/app/pages/presenceboard/presenceboard.page.ts"],"names":["call","url","object","Promise","resolve","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","setTimeout","complete","open","token","console","log","setRequestHeader","send","response","post","upload","imagePath","http","transfer","result","fileTransfer","create","uploadOpts","fileKey","httpMethod","fileName","Date","getTime","Math","random","chunkedMode","headers","auth","then","data","err","logout","serialize","obj","str","key","encodeURIComponent","routes","path","component","PresenceboardPageRoutingModule","imports","forChild","exports","PresenceboardPageModule","declarations","PresenceboardPage","router","route","state","params","maybe","present","absent","nextPresence","nextAbsence","nextMaybe","exceededPres","exceededMay","exceededAbs","queryParams","subscribe","eventId","load","getPresentPlayers","length","getMaybePlayers","getAbsentPlayers","id","teamId","playerId","JSON","parse","error","i","push","event","target","pres","index","player","navigateByUrl","selector","template"],"mappings":"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","file":"pages-presenceboard-presenceboard-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"navbar-theme\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button color=\\\"light\\\" defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"light\\\">Presence</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <div>\\n    <div *ngFor=\\\"let pres of (this.present); let i = index\\\">\\n      <ion-card (click)=\\\"selectPlayer(0, i)\\\" class=\\\"clickable\\\">\\n        <app-smallplayer pres=\\\"0\\\" [img]=\\\"pres.image\\\" [first]=\\\"pres.first\\\" [last]=\\\"pres.last\\\" [role]=\\\"pres.role\\\" [late]=\\\"pres.late\\\"></app-smallplayer>\\n      </ion-card>\\n    </div>\\n    <div *ngFor=\\\"let may of (this.maybe); let i = index\\\">\\n      <ion-card (click)=\\\"selectPlayer(1, i)\\\" class=\\\"clickable\\\">\\n        <app-smallplayer pres=\\\"1\\\" [img]=\\\"may.image\\\" [first]=\\\"may.first\\\" [last]=\\\"may.last\\\" [role]=\\\"may.role\\\"></app-smallplayer>\\n      </ion-card>\\n    </div>\\n    <div *ngFor=\\\"let abs of (this.absent); let i = index\\\">\\n      <ion-card (click)=\\\"selectPlayer(2, i)\\\" class=\\\"clickable\\\">\\n        <app-smallplayer pres=\\\"2\\\" [img]=\\\"abs.image\\\" [first]=\\\"abs.first\\\" [last]=\\\"abs.last\\\" [role]=\\\"abs.role\\\"></app-smallplayer>\\n      </ion-card>\\n    </div>\\n  </div>\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\";","import { HttpClient } from '@angular/common/http';\nimport { serialize } from './serializer';\nimport { get, remove } from './storage';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\n\n\nexport async function call(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }else{\n                setTimeout(() => {\n                    resolve(\"error\")\n                }, 1000)\n            }\n        }\n        let complete = url;\n        if (object != {}){\n            complete += \"?\" + serialize(object);\n        }\n\n        request.open(\"GET\", complete);\n        if (object.token){\n            console.log(object.token);\n            \n            request.setRequestHeader(\"Auth\", object.token);\n            delete object.token;\n        }\n        request.send();\n    });\n    return response as string;\n}\nexport async function post(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }\n        }\n        request.open(\"POST\", url + \"?\" + serialize(object));\n\n        if (object.token){\n            request.setRequestHeader(\"auth\", object.token);\n            delete object.token;\n        }\n        request.send(null);\n    });\n    return response as string;\n}\n    \nexport async function upload(url, imagePath, object, http, transfer): Promise<string>{\n    let response = await new Promise(async (resolve) => { \n        if (imagePath == \"\"){\n            let result = await post(url, object);\n            resolve(result)\n        }else{\n            const fileTransfer: FileTransferObject = transfer.create();\n            const uploadOpts: FileUploadOptions = {\n                fileKey: 'image',\n                httpMethod:'POST',\n                fileName: new Date().getTime() + Math.random() + Math.random() + \".jpg\",\n                chunkedMode: false,\n            };\n            if (object.token){\n                uploadOpts.headers = {auth: object.token};\n                delete object.token;\n            }\n            fileTransfer.upload(imagePath, url + \"?\" + serialize(object), uploadOpts).then((data) => {\n                if (data.response){\n                    resolve(data.response);\n                }\n            }, (err) => {\n                resolve(err);\n            });\n        }\n    });\n    return response as string;\n}\n\nexport async function logout(){\n    let token = await get(\"token\");\n    await call(\"http://192.168.2.251:3000/api/logout\", {token: token});\n    await remove(\"token\");\n    await remove(\"role\");\n}","export function serialize(obj){\n    var str = \"\";\n    for (var key in obj) {\n        if (str != \"\") {\n            str += \"&\";\n        }\n        str += key + \"=\" + encodeURIComponent(obj[key]);\n    }\n    return str;\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PresenceboardPage } from './presenceboard.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PresenceboardPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PresenceboardPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PresenceboardPageRoutingModule } from './presenceboard-routing.module';\n\nimport { PresenceboardPage } from './presenceboard.page';\nimport { SmallplayerComponent, SmallplayerModule } from 'src/app/components/smallplayer/smallplayer.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PresenceboardPageRoutingModule,\n    SmallplayerModule\n  ],\n  declarations: [PresenceboardPage]\n})\nexport class PresenceboardPageModule {}\n","export default \".clickable:active {\\n  -webkit-filter: brightness(0.95);\\n          filter: brightness(0.95);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZHJpZW50cmFoYW4vRGVza3RvcC9UZWFtY2xhcC9UZWFtQ2xhcC9zcmMvYXBwL3BhZ2VzL3ByZXNlbmNlYm9hcmQvcHJlc2VuY2Vib2FyZC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3ByZXNlbmNlYm9hcmQvcHJlc2VuY2Vib2FyZC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQ0FBQTtVQUFBLHdCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wcmVzZW5jZWJvYXJkL3ByZXNlbmNlYm9hcmQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNsaWNrYWJsZTphY3RpdmV7XG4gICAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOTUpO1xufSIsIi5jbGlja2FibGU6YWN0aXZlIHtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOTUpO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { get } from 'src/app/functions/storage';\nimport { call } from 'src/app/functions/call';\nimport { serialize } from 'src/app/functions/serializer';\n\n@Component({\n  selector: 'app-presenceboard',\n  templateUrl: './presenceboard.page.html',\n  styleUrls: ['./presenceboard.page.scss'],\n})\nexport class PresenceboardPage implements OnInit {\n  state = \"Present\";\n  params : any = {};\n  maybe = [];\n  present = [];\n  absent = [];\n  nextPresence = 0;\n  nextAbsence = 0;\n  nextMaybe = 0;\n  exceededPres = false;\n  exceededMay = false;\n  exceededAbs = false;\n  constructor(private router: Router, private route: ActivatedRoute) {\n    this.route.queryParams.subscribe((queryParams) => {\n      if (queryParams && queryParams.eventId){\n        this.params = queryParams;\n      }else{\n      }\n    })\n  }\n\n  ngOnInit() {\n    this.load();\n  }\n  async load(){\n\n    this.exceededPres = false;\n    this.exceededMay = false;\n    this.exceededAbs = false;\n    this.nextPresence = 0;\n    this.present = [];\n    await this.getPresentPlayers();\n    this.nextMaybe = 0;\n    this.maybe = [];\n    if (this.present.length  < 15){\n      await this.getMaybePlayers();\n    }\n    this.nextAbsence = 0;\n    this.absent = [];\n    if (this.present.length + this.maybe.length < 15){\n      await this.getAbsentPlayers();\n    }\n  }\n  async getPresentPlayers(){\n    let token = await get(\"token\");\n    let obj : any = {token: token, id: this.params.teamId, eventId: this.params.eventId, nextPresence: this.nextPresence};\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId;\n    }\n    let result : any= await call(\"http://192.168.2.251:3000/api/getPresence\", obj);\n    try{\n      result = JSON.parse(result);\n      if (result.error){throw result.error;};\n      for (var i = 0; i < result.length; i++){\n        this.present.push(result[i]);\n      }\n      if (result.length == 0){\n        this.nextMaybe = 0;\n        this.maybe = [];\n        await this.getMaybePlayers();\n        this.exceededPres = true;\n      }else{\n        this.nextPresence += result.length;\n      }\n      \n    }catch(error){\n    }\n  }\n  async getAbsentPlayers(){\n    let token = await get(\"token\");\n    let obj : any = {token: token, id: this.params.teamId, eventId: this.params.eventId, nextAbsence: this.nextAbsence};\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId;\n    }\n    let result : any= await call(\"http://192.168.2.251:3000/api/getAbsence\", obj);\n    try{\n      result = JSON.parse(result);\n      if (result.error){throw result.error;};\n      for (var i = 0; i < result.length; i++){\n        this.absent.push(result[i]);\n      }\n      this.nextAbsence += result.length;\n    }catch(error){\n      \n    }\n  }\n  async getMaybePlayers(){\n    let token = await get(\"token\");\n    let obj : any = {token: token, id: this.params.teamId, eventId: this.params.eventId, nextMaybe: this.nextMaybe};\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId;\n    }\n    let result : any= await call(\"http://192.168.2.251:3000/api/getMaybe\", obj);\n    try{\n      result = JSON.parse(result);\n      if (result.error){throw result.error;};\n      for (var i = 0; i < result.length; i++){\n        this.maybe.push(result[i]);\n      }\n      \n      if (result.length == 0){\n        this.nextAbsence = 0;\n        this.absent = [];\n        await this.getAbsentPlayers();\n        this.exceededMay = true;\n      }else{\n        this.nextMaybe += result.length;\n      }\n    }catch(error){\n      \n    }\n  }\n  async loadData(event){\n    if (!this.exceededPres){\n      await this.getPresentPlayers();\n    }else if (!this.exceededMay){\n      await this.getMaybePlayers();\n    }else if (!this.exceededAbs){\n      await this.getAbsentPlayers();\n    }\n    event.target.complete();\n  }\n  async refresh(event){\n    this.load();\n    event.target.complete();\n  }\n  selectPlayer(pres, index){\n    let obj : any = {\n      teamId: this.params.teamId\n    };\n    if (this.params.playerId && this.params.playerId != \"undefined\"){\n      obj.playerId = this.params.playerId\n    }\n    if (pres == 0){\n      obj.player = this.present[index].id;\n    }else if (pres == 1){\n      obj.player = this.maybe[index].id;\n    }else if (pres == 2){\n      obj.player = this.absent[index].id;\n    }\n    this.router.navigateByUrl(\"/player-profile?\" + serialize(obj));\n  }\n}\n"]}