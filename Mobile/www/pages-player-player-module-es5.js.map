{"version":3,"sources":["webpack:///src/app/pages/player/player.page.html","webpack:///src/app/functions/call.ts","webpack:///src/app/functions/serializer.ts","webpack:///src/app/pages/player/player-routing.module.ts","webpack:///src/app/pages/player/player.module.ts","webpack:///src/app/pages/player/player.page.scss","webpack:///src/app/pages/player/player.page.ts"],"names":["call","url","object","Promise","resolve","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","setTimeout","complete","open","token","console","log","setRequestHeader","send","response","post","upload","imagePath","http","transfer","result","fileTransfer","create","uploadOpts","fileKey","httpMethod","fileName","Date","getTime","Math","random","chunkedMode","headers","auth","then","data","err","logout","serialize","obj","str","key","encodeURIComponent","routes","path","component","PlayerPageRoutingModule","imports","forChild","exports","PlayerPageModule","declarations","PlayerPage","router","route","modal","playerInfo","state","invisible","teams","events","mustGoBack","loaded","params","nextEvent","queryParams","subscribe","playerId","filtered","players","filter","el","id","length","name","first","last","load","i","image","navigateByUrl","getTeams","getUpcomming","JSON","parse","error","j","parseInt","toDataURL","base64","index","currentEventInfo","eventId","teamId","team","event","presence","presenceRatio","roles","present","onDidDismiss","map","x","includes","push","target","selector","template","animations","transform","callback","Image","crossOrigin","addEventListener","canvas","document","createElement","context","getContext","width","height","drawImage","src"],"mappings":"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","file":"pages-player-player-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"navbar-theme\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button color=\\\"light\\\" defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"light\\\">{{playerInfo.name}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [attr.invisible]=\\\"this.invisible\\\">\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <ion-segment color=\\\"navbar-theme\\\" [(ngModel)]=\\\"state\\\">\\n    <ion-segment-button value=\\\"Teams\\\">\\n      <ion-label>{{\\\"PLAYERS.0\\\" | translate}}</ion-label>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"Upcomming\\\">\\n      <ion-label>{{\\\"PLAYERS.1\\\" | translate}}</ion-label>\\n    </ion-segment-button>\\n  </ion-segment>  \\n  <div class=\\\"wrapper\\\">\\n    <div class=\\\"cardContainer\\\" [@enterLeft] *ngIf=\\\"this.state=='Teams'\\\">\\n      <ion-card class=\\\"clickable\\\" *ngFor=\\\"let team of teams;let i = index\\\">\\n        <ion-item lines=\\\"none\\\" (click)=\\\"selectTeam(i)\\\">\\n         <app-team [name]=\\\"team.name\\\" [img]=\\\"team.image\\\" [category]=\\\"team.category\\\"></app-team>\\n        </ion-item>\\n      </ion-card>\\n    </div>\\n    <div class=\\\"cardContainer\\\" [@enterRight] *ngIf=\\\"this.state=='Upcomming' && loaded\\\">\\n      <app-upcomming (presenceChanged)=\\\"changePresence($event)\\\" [index]=\\\"i\\\" (selected)=\\\"selectEvent($event)\\\" *ngFor=\\\"let event of (this.events); let i = index\\\" [teamId]=\\\"event.team\\\" [playerId]=\\\"this.params.playerId\\\" [id]=\\\"event.id\\\" [presence]=\\\"event.presence\\\" [place]=\\\"event.places\\\" [late]=\\\"event.late\\\" [name]=\\\"event.name\\\" [date]=\\\"event.date + '/' + event.month + '/' + event.year + '!' + ((event.startTime - event.startTime % 60) / 60) + ':' + ('0' + event.startTime % 60).slice(-2)\\\"></app-upcomming>\\n      <ion-infinite-scroll *ngIf=\\\"this.state=='Upcomming' && loaded\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n        <ion-infinite-scroll-content\\n          loadingSpinner=\\\"bubbles\\\"\\n          loadingText=\\\"Loading more data...\\\">\\n        </ion-infinite-scroll-content>\\n      </ion-infinite-scroll>\\n    </div>\\n    <div class=\\\"joinButton clickable\\\"  (click)=\\\"joinTeam()\\\">\\n      <img src=\\\"../../../assets/qr.png\\\" alt=\\\"\\\">\\n    </div>\\n  </div>\\n</ion-content>\\n\";","import { HttpClient } from '@angular/common/http';\nimport { serialize } from './serializer';\nimport { get, remove } from './storage';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\n\n\nexport async function call(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }else{\n                setTimeout(() => {\n                    resolve(\"error\")\n                }, 1000)\n            }\n        }\n        let complete = url;\n        if (object != {}){\n            complete += \"?\" + serialize(object);\n        }\n\n        request.open(\"GET\", complete);\n        if (object.token){\n            console.log(object.token);\n            \n            request.setRequestHeader(\"Auth\", object.token);\n            delete object.token;\n        }\n        request.send();\n    });\n    return response as string;\n}\nexport async function post(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }\n        }\n        request.open(\"POST\", url + \"?\" + serialize(object));\n\n        if (object.token){\n            request.setRequestHeader(\"auth\", object.token);\n            delete object.token;\n        }\n        request.send(null);\n    });\n    return response as string;\n}\n    \nexport async function upload(url, imagePath, object, http, transfer): Promise<string>{\n    let response = await new Promise(async (resolve) => { \n        if (imagePath == \"\"){\n            let result = await post(url, object);\n            resolve(result)\n        }else{\n            const fileTransfer: FileTransferObject = transfer.create();\n            const uploadOpts: FileUploadOptions = {\n                fileKey: 'image',\n                httpMethod:'POST',\n                fileName: new Date().getTime() + Math.random() + Math.random() + \".jpg\",\n                chunkedMode: false,\n            };\n            if (object.token){\n                uploadOpts.headers = {auth: object.token};\n                delete object.token;\n            }\n            fileTransfer.upload(imagePath, url + \"?\" + serialize(object), uploadOpts).then((data) => {\n                if (data.response){\n                    resolve(data.response);\n                }\n            }, (err) => {\n                resolve(err);\n            });\n        }\n    });\n    return response as string;\n}\n\nexport async function logout(){\n    let token = await get(\"token\");\n    await call(\"http://192.168.2.251:3000/api/logout\", {token: token});\n    await remove(\"token\");\n    await remove(\"role\");\n}","export function serialize(obj){\n    var str = \"\";\n    for (var key in obj) {\n        if (str != \"\") {\n            str += \"&\";\n        }\n        str += key + \"=\" + encodeURIComponent(obj[key]);\n    }\n    return str;\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlayerPage } from './player.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlayerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PlayerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlayerPageRoutingModule } from './player-routing.module';\n\nimport { PlayerPage } from './player.page';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from '../home/home.page';\nimport { TeamComponent, TeamModule } from '../../components/team/team.component';\nimport { UpcommingComponent, UpcommingModule } from 'src/app/components/upcomming/upcomming.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PlayerPageRoutingModule,\n    TranslateModule,\n    UpcommingModule,\n    TeamModule\n  ],\n  declarations: [PlayerPage]\n})\nexport class PlayerPageModule {}\n","export default \".cardContainer {\\n  position: absolute;\\n  top: 0px;\\n  width: 100%;\\n  height: 100%;\\n  max-height: 100%;\\n}\\n\\n.wrapper {\\n  position: relative;\\n  width: 100%;\\n  flex-grow: 1;\\n  background-color: red;\\n}\\n\\nion-content {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nh3 {\\n  box-shadow: rgba(0, 0, 0, 0.12) 0px 4px 16px;\\n}\\n\\nion-item {\\n  border-radius: 10px;\\n  overflow: hidden;\\n}\\n\\n.nothingButton {\\n  margin: 20px 20px 20px 20px !important;\\n}\\n\\nhtml, body, ion-app, div.nav-decor, ion-content, app-root, #background-content {\\n  background-color: transparent !important;\\n}\\n\\n.clickable:active {\\n  -webkit-filter: brightness(0.95);\\n          filter: brightness(0.95);\\n}\\n\\n.joinButton {\\n  position: fixed;\\n  bottom: 10px;\\n  right: 10px;\\n  margin: 20px 20px 20px 20px !important;\\n  color: white;\\n  font-size: 55px;\\n  border-radius: 50%;\\n  width: 70px;\\n  height: 70px;\\n  background-color: #0088ff;\\n  text-align: center;\\n  padding: 12px 0px 0px 0px;\\n  line-height: 40px;\\n  box-shadow: 10px 7px 30px -16px rgba(0, 0, 0, 0.75);\\n}\\n\\n.joinButton img {\\n  width: 30px;\\n  -webkit-filter: invert(1);\\n          filter: invert(1);\\n  margin-left: -1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZHJpZW50cmFoYW4vRGVza3RvcC9UZWFtY2xhcC9UZWFtQ2xhcC9zcmMvYXBwL3BhZ2VzL3BsYXllci9wbGF5ZXIucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9wbGF5ZXIvcGxheWVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURDQTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxxQkFBQTtBQ0VKOztBREFBO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0FDR0o7O0FEREE7RUFDSSw0Q0FBQTtBQ0lKOztBREZBO0VBQ0ksbUJBQUE7RUFDQSxnQkFBQTtBQ0tKOztBREhBO0VBQ0ksc0NBQUE7QUNNSjs7QURKQTtFQUFpRix3Q0FBQTtBQ1FqRjs7QUROQTtFQUNJLGdDQUFBO1VBQUEsd0JBQUE7QUNTSjs7QURQQTtFQUNJLGVBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLHNDQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtREFBQTtBQ1VKOztBRFJBO0VBQ0ksV0FBQTtFQUNBLHlCQUFBO1VBQUEsaUJBQUE7RUFDQSxpQkFBQTtBQ1dKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcGxheWVyL3BsYXllci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZENvbnRhaW5lcntcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwcHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIG1heC1oZWlnaHQ6IDEwMCU7XG59XG4ud3JhcHBlcntcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZmxleC1ncm93OiAxO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbn1cbmlvbi1jb250ZW50e1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cbmgze1xuICAgIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4xMikgMHB4IDRweCAxNnB4O1xufVxuaW9uLWl0ZW0ge1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cbi5ub3RoaW5nQnV0dG9ue1xuICAgIG1hcmdpbjogMjBweCAyMHB4IDIwcHggMjBweCAhaW1wb3J0YW50O1xufVxuaHRtbCwgYm9keSwgaW9uLWFwcCwgZGl2Lm5hdi1kZWNvciwgaW9uLWNvbnRlbnQsIGFwcC1yb290LCAjYmFja2dyb3VuZC1jb250ZW50IHsgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsgfVxuXG4uY2xpY2thYmxlOmFjdGl2ZXtcbiAgICBmaWx0ZXI6IGJyaWdodG5lc3MoMC45NSk7XG59XG4uam9pbkJ1dHRvbntcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgYm90dG9tOiAxMHB4O1xuICAgIHJpZ2h0OiAxMHB4O1xuICAgIG1hcmdpbjogMjBweCAyMHB4IDIwcHggMjBweCAhaW1wb3J0YW50O1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXNpemU6IDU1cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIHdpZHRoOiA3MHB4O1xuICAgIGhlaWdodDogNzBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA4OGZmO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAxMnB4IDBweCAwcHggMHB4O1xuICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgIGJveC1zaGFkb3c6IDEwcHggN3B4IDMwcHggLTE2cHggcmdiYSgwLDAsMCwwLjc1KTtcbn1cbi5qb2luQnV0dG9uIGltZ3tcbiAgICB3aWR0aDogMzBweDtcbiAgICBmaWx0ZXI6IGludmVydCgxLjApO1xuICAgIG1hcmdpbi1sZWZ0OiAtMXB4O1xufSIsIi5jYXJkQ29udGFpbmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDBweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgbWF4LWhlaWdodDogMTAwJTtcbn1cblxuLndyYXBwZXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiAxMDAlO1xuICBmbGV4LWdyb3c6IDE7XG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbn1cblxuaW9uLWNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG5oMyB7XG4gIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4xMikgMHB4IDRweCAxNnB4O1xufVxuXG5pb24taXRlbSB7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5ub3RoaW5nQnV0dG9uIHtcbiAgbWFyZ2luOiAyMHB4IDIwcHggMjBweCAyMHB4ICFpbXBvcnRhbnQ7XG59XG5cbmh0bWwsIGJvZHksIGlvbi1hcHAsIGRpdi5uYXYtZGVjb3IsIGlvbi1jb250ZW50LCBhcHAtcm9vdCwgI2JhY2tncm91bmQtY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG59XG5cbi5jbGlja2FibGU6YWN0aXZlIHtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOTUpO1xufVxuXG4uam9pbkJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAxMHB4O1xuICByaWdodDogMTBweDtcbiAgbWFyZ2luOiAyMHB4IDIwcHggMjBweCAyMHB4ICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiA1NXB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIHdpZHRoOiA3MHB4O1xuICBoZWlnaHQ6IDcwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDg4ZmY7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMTJweCAwcHggMHB4IDBweDtcbiAgbGluZS1oZWlnaHQ6IDQwcHg7XG4gIGJveC1zaGFkb3c6IDEwcHggN3B4IDMwcHggLTE2cHggcmdiYSgwLCAwLCAwLCAwLjc1KTtcbn1cblxuLmpvaW5CdXR0b24gaW1nIHtcbiAgd2lkdGg6IDMwcHg7XG4gIGZpbHRlcjogaW52ZXJ0KDEpO1xuICBtYXJnaW4tbGVmdDogLTFweDtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Location } from \"@angular/common\";\nimport { IonicRouteStrategy, ModalController } from '@ionic/angular';\nimport { HomePage } from '../home/home.page';\nimport { trigger, transition, style, animate } from '@angular/animations';\nimport { JoinTeamPage } from '../join-team/join-team.page';\nimport { LoadingController } from '@ionic/angular';\nimport { get, set } from 'src/app/functions/storage';\nimport { call } from 'src/app/functions/call';\nimport { serialize } from 'src/app/functions/serializer';\n\n@Component({\n  selector: 'app-player',\n  templateUrl: './player.page.html',\n  styleUrls: ['./player.page.scss'],\n  animations: [\n    trigger(\n      'enterLeft', \n      [\n        transition(\n          ':enter', \n          [\n            style({ transform: \"translateX(-100%)\"}),\n            animate('0.3s', \n                    style({ transform: \"translateX(0px)\"}))\n          ]\n        ),\n        transition(\n          ':leave', \n          [\n            style({ transform: \"translateX(0%)\"}),\n            animate('0.3s', \n                    style({ transform: \"translateX(-100%)\"}))\n          ]\n        )\n      ]\n    ),trigger(\n      'enterRight', \n      [\n        transition(\n          ':enter', \n          [\n            style({ transform: \"translateX(100%)\"}),\n            animate('0.3s', \n                    style({ transform: \"translateX(0px)\"}))\n          ]\n        ),\n        transition(\n          ':leave', \n          [\n            style({ transform: \"translateX(0%)\"}),\n            animate('0.3s', \n                    style({ transform: \"translateX(100%)\"}))\n          ]\n        )\n      ]\n    )\n  ]\n})\nexport class PlayerPage implements OnInit {\n  playerInfo : any = {\n  };\n  state = \"Teams\";\n  invisible = false;\n  teams = [];\n  events : any = [];\n  mustGoBack = false;\n  loaded = false;\n  params : any = {};\n  nextEvent = 0;\n  constructor(private router: Router, private route: ActivatedRoute, private modal: ModalController) {\n    route.queryParams.subscribe(async (queryParams) => {\n      this.params = queryParams;\n      if (queryParams && queryParams.playerId){\n        let filtered = HomePage.players.filter((el)=>{\n          return el.id == queryParams.playerId;\n        })\n        if (filtered.length == 0){\n          this.mustGoBack = true;\n          return;\n        }\n        this.playerInfo = filtered[0];\n        this.playerInfo.name = filtered[0].first + \" \" + filtered[0].last;\n        this.load();\n        \n      }else{\n        this.mustGoBack = true;\n      }\n    })\n  }\n  async ngOnInit() {\n    if (await get(\"player.\" + this.playerInfo.id + \".teams\")){\n      this.teams = await get(\"player.\" + this.playerInfo.id + \".teams\");\n      for (var i = 0; i < this.teams.length; i++){\n        this.teams[i].image = await get(\"image.\" + this.teams[i].id);\n      }\n    }\n    if (await get(\"player.\" + this.playerInfo.id + \".upcomming\")){\n      this.events = await get(\"player.\" + this.playerInfo.id + \".upcomming\");\n    }\n  }\n  async ionViewDidEnter(){\n    if (this.mustGoBack){\n      this.router.navigateByUrl(\"/home\");\n      this.mustGoBack = false;\n    }\n    \n    \n  }\n  async load(){\n    if (this.playerInfo.teams.length != this.teams.length){\n      await this.getTeams();\n      await this.getUpcomming();\n    }\n    this.loaded = true;\n  }\n  async getTeams(){\n    let token = await get(\"token\");\n    let teams = await call(\"http://192.168.2.251:3000/api/getTeams\", {token: token, playerId: this.playerInfo.id});\n    try{\n      teams = JSON.parse(teams);\n      if ((teams as any).error){throw (teams as any).error;};\n      this.teams = teams as any;\n      set(\"player.\" + this.playerInfo.id + \".teams\", this.teams);\n      for (var i = 0; i < this.teams.length; i++){\n        let j = parseInt(\"\" + i);\n        toDataURL(this.teams[j].image, (base64) => {\n          set(\"image.\" + this.teams[j].id, base64 + \"\");\n        });\n      }\n    }catch(err){\n    }\n    \n  }\n  async getUpcomming(){\n    this.nextEvent = 0;\n    let token = await get(\"token\");\n    let events = await call(\"http://192.168.2.251:3000/api/getUpcommingEvents\", {token: token, playerId: this.playerInfo.id, nextEvent: this.nextEvent});\n    try{\n      events = JSON.parse(events);\n      if ((events as any).error){throw (events as any).error;};\n      this.events = events;\n      this.nextEvent += events.length;\n\n      set(\"player.\" + this.playerInfo.id + \".upcomming\", this.events);\n    }catch(err){\n      \n    }\n  }\n  selectTeam(index: Number){\n    this.router.navigateByUrl(`/team/events?teamId=${this.teams[index as any].id}&playerId=${this.playerInfo.id}`);\n  }\n  selectEvent(index: any){\n    HomePage.currentEventInfo = this.events[index.index];\n    let obj = {\n      eventId: this.events[index.index].id,\n      playerId: this.params.playerId,\n      teamId: this.events[index.index].team\n    };\n    if (!this.params.playerId){\n      delete obj.playerId\n    }\n    this.router.navigateByUrl(\"/event?\" + serialize(obj));\n  }\n  changePresence(event){\n    if (this.events[event.index].presence == \"NO\" && event.presence != 2){\n      this.events[event.index].presenceRatio[2] -= 1;\n      this.events[event.index].presenceRatio[event.presence] += 1;\n    }else if (this.events[event.index].presence == \"MAYBE\" && event.presence != 1){\n      this.events[event.index].presenceRatio[1] -= 1;\n      this.events[event.index].presenceRatio[event.presence] += 1;\n    }else if (this.events[event.index].presence == \"YES\" && event.presence != 0){\n      this.events[event.index].presenceRatio[0] -= 1;\n      this.events[event.index].presenceRatio[event.presence] += 1;\n    }\n    let roles = [\"YES\", \"MAYBE\", \"NO\"];\n    this.events[event.index].presence = roles[event.presence];\n  }\n  joinTeam(){\n    this.modal.create({component: JoinTeamPage}).then((modal) => {\n      modal.present();\n      this.invisible = true;\n      modal.onDidDismiss().then((data) => {\n        this.invisible = false;\n        if (data.data && !this.teams.map((x) => x.id).includes(data.data.id)){\n          this.teams.push(data.data)\n        }\n      });\n    });\n  }\n  ionViewWillLeave(){\n    this.loaded = false;\n  }\n  async refresh(event){\n    if (this.state == 'Teams'){\n      await this.getTeams();\n      event.target.complete();\n    }else{\n      await this.getUpcomming();\n      event.target.complete();\n    }\n  }\n  async loadData(event){\n    let token = await get(\"token\");\n    let events = await call(\"http://192.168.2.251:3000/api/getUpcommingEvents\", {token: token, playerId: this.playerInfo.id, nextEvent: this.nextEvent});\n    try{\n      events = JSON.parse(events);\n      if ((events as any).error){throw (events as any).error;};\n      for (var i = 0; i < events.length; i++){\n        this.events.push(events[i]);\n      }\n      this.nextEvent += events.length;\n      event.target.complete();\n    }catch(err){\n      \n    }\n\n  }\n}\n\nfunction toDataURL(url, callback) {\n  let image;\n    image = new Image();\n    image.crossOrigin = 'Anonymous';\n    image.addEventListener('load', function() {\n        let canvas = document.createElement('canvas');\n        let context = canvas.getContext('2d');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        context.drawImage(image, 0, 0);\n        try {\n          callback(canvas.toDataURL('image/png'));\n        } catch (err) {\n            console.error(err)\n        }\n    });\n    image.src = url;\n}"]}