{"version":3,"sources":["./src/app/pages/settings/editprofile/editprofile.page.html","./src/app/functions/call.ts","./src/app/functions/serializer.ts","./src/app/pages/settings/editprofile/editprofile-routing.module.ts","./src/app/pages/settings/editprofile/editprofile.module.ts","./src/app/pages/settings/editprofile/editprofile.page.scss","./src/app/pages/settings/editprofile/editprofile.page.ts"],"names":[],"mappings":"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","file":"pages-settings-editprofile-editprofile-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"navbar-theme\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button text=\\\"{{'SETTINGS.ACCOUNTINFO.BACKTITLE' | translate}}\\\" color=\\\"light\\\" defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"white\\\">{{\\\"SETTINGS.ACCOUNTINFO.TITLE\\\" | translate}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button [disabled]='this.firstname == this.unmodified.firstname && this.lastname == this.unmodified.lastname && this.email == this.unmodified.email' (click)=\\\"this.save()\\\" class=\\\"\\\">\\n        <ion-icon color=\\\"white\\\" name=\\\"save-outline\\\" ></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-item-divider>\\n    <ion-label>\\n      {{\\\"SETTINGS.ACCOUNTINFO.0\\\" | translate}}\\n    </ion-label>\\n  </ion-item-divider>\\n  <ion-item>\\n    <ion-input [(ngModel)]=\\\"firstname\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item-divider>\\n    <ion-label>\\n      {{\\\"SETTINGS.ACCOUNTINFO.1\\\" | translate}}\\n    </ion-label>\\n  </ion-item-divider>\\n  <ion-item>\\n    <ion-input [(ngModel)]=\\\"lastname\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item-divider>\\n    <ion-label>\\n      {{\\\"SETTINGS.ACCOUNTINFO.2\\\" | translate}}\\n    </ion-label>\\n  </ion-item-divider>\\n  <ion-item>\\n    <ion-input [(ngModel)]=\\\"email\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item-divider>\\n    <ion-label>\\n      {{\\\"SETTINGS.ACCOUNTINFO.3\\\" | translate}}\\n    </ion-label>\\n  </ion-item-divider>\\n  <ion-item routerLink=\\\"/password\\\" routerLinkActive=\\\"active\\\" class=\\\"\\\" button color=\\\"primary\\\">\\n    {{\\\"SETTINGS.ACCOUNTINFO.4\\\" | translate}}\\n  </ion-item>\\n</ion-content>\\n\";","import { HttpClient } from '@angular/common/http';\nimport { serialize } from './serializer';\nimport { get, remove } from './storage';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\n\n\nexport async function call(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }else{\n                setTimeout(() => {\n                    resolve(\"error\")\n                }, 1000)\n            }\n        }\n        let complete = url;\n        if (object != {}){\n            complete += \"?\" + serialize(object);\n        }\n\n        request.open(\"GET\", complete);\n        if (object.token){\n            console.log(object.token);\n            \n            request.setRequestHeader(\"Auth\", object.token);\n            delete object.token;\n        }\n        request.send();\n    });\n    return response as string;\n}\nexport async function post(url, object): Promise<string>{\n    let response = await new Promise((resolve) => { \n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200){\n                resolve(request.responseText);\n            }\n        }\n        request.open(\"POST\", url + \"?\" + serialize(object));\n\n        if (object.token){\n            request.setRequestHeader(\"auth\", object.token);\n            delete object.token;\n        }\n        request.send(null);\n    });\n    return response as string;\n}\n    \nexport async function upload(url, imagePath, object, http, transfer): Promise<string>{\n    let response = await new Promise(async (resolve) => { \n        if (imagePath == \"\"){\n            let result = await post(url, object);\n            resolve(result)\n        }else{\n            const fileTransfer: FileTransferObject = transfer.create();\n            const uploadOpts: FileUploadOptions = {\n                fileKey: 'image',\n                httpMethod:'POST',\n                fileName: new Date().getTime() + Math.random() + Math.random() + \".jpg\",\n                chunkedMode: false,\n            };\n            if (object.token){\n                uploadOpts.headers = {auth: object.token};\n                delete object.token;\n            }\n            fileTransfer.upload(imagePath, url + \"?\" + serialize(object), uploadOpts).then((data) => {\n                if (data.response){\n                    resolve(data.response);\n                }\n            }, (err) => {\n                resolve(err);\n            });\n        }\n    });\n    return response as string;\n}\n\nexport async function logout(){\n    let token = await get(\"token\");\n    await call(\"http://192.168.2.251:3000/api/logout\", {token: token});\n    await remove(\"token\");\n    await remove(\"role\");\n}","export function serialize(obj){\n    var str = \"\";\n    for (var key in obj) {\n        if (str != \"\") {\n            str += \"&\";\n        }\n        str += key + \"=\" + encodeURIComponent(obj[key]);\n    }\n    return str;\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditprofilePage } from './editprofile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditprofilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditprofilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditprofilePageRoutingModule } from './editprofile-routing.module';\n\nimport { EditprofilePage } from './editprofile.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditprofilePageRoutingModule,\n    TranslateModule\n  ],\n  declarations: [EditprofilePage]\n})\nexport class EditprofilePageModule {}\n","export default \".rightEdit {\\n  text-align: right;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZHJpZW50cmFoYW4vRGVza3RvcC9UZWFtY2xhcC9UZWFtQ2xhcC9zcmMvYXBwL3BhZ2VzL3NldHRpbmdzL2VkaXRwcm9maWxlL2VkaXRwcm9maWxlLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvc2V0dGluZ3MvZWRpdHByb2ZpbGUvZWRpdHByb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksaUJBQUE7QUNBSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NldHRpbmdzL2VkaXRwcm9maWxlL2VkaXRwcm9maWxlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLnJpZ2h0RWRpdHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbn0iLCIucmlnaHRFZGl0IHtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { call } from 'src/app/functions/call';\nimport { get } from 'src/app/functions/storage';\n\n@Component({\n  selector: 'app-editprofile',\n  templateUrl: './editprofile.page.html',\n  styleUrls: ['./editprofile.page.scss'],\n})\nexport class EditprofilePage implements OnInit {\n\n  firstname = \"\";\n  lastname = \"\";\n  email = \"\";\n  unmodified = {firstname: \"\", lastname: \"\", email: \"\"};\n  constructor() {\n\n    this.load();\n  }\n\n\n  ngOnInit() {\n  }\n  async load(){\n    let token = await get(\"token\");\n    let result : any = await call(\"http://192.168.2.251:3000/api/getAccountInfo\", {\n      token: token\n    });\n    try{\n      result = JSON.parse(result);\n      if ((result as any).error){throw (result as any).error;};\n      this.firstname = capitalizeFirstLetter(result.first);\n      this.lastname = capitalizeFirstLetter(result.last);\n      this.email = capitalizeFirstLetter(result.email);\n\n      this.unmodified = {firstname: this.firstname, lastname: this.lastname, email: this.email};\n    }catch(error){\n    }\n    \n  }\n  async save(){\n    let token = await get(\"token\");\n    let obj : any = {token: token};\n    if (this.firstname != this.unmodified.firstname){\n      obj.firstname = this.firstname;\n    }\n    if (this.lastname != this.unmodified.lastname){\n      obj.lastname = this.lastname;\n    }\n    if (this.email != this.unmodified.email){\n      obj.email = this.email;\n    }\n    let result : any = await call(\"http://192.168.2.251:3000/api/setAccountInfo\", obj);\n  }\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}"],"sourceRoot":"webpack:///"}