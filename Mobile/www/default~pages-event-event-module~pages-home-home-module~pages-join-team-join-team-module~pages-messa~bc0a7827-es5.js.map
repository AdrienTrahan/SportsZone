{"version":3,"sources":["webpack:///src/app/pages/join-team/join-team.page.html","webpack:///src/app/pages/join-team/join-team.page.scss","webpack:///src/app/pages/join-team/join-team.page.ts"],"names":["JoinTeamPage","translate","alertController","modal","qrScanner","cameraPreview","sanitizer","cd","loadingController","route","height","keyboardUp","url","playerId","mustGoBack","coach","queryParams","subscribe","dismiss","back","cameraPreviewOpts","x","y","width","canvas","nativeElement","getBoundingClientRect","Math","min","camera","tapPhoto","previewDrag","toBack","alpha","startCamera","then","res","startScanning","err","stopCamera","hide","presentLoading","loading","params","getParams","includes","split","response","create","cssClass","header","instant","message","buttons","alert","present","JSON","parse","id","parser","document","createElement","href","query","search","substring","vars","i","length","pair","decodeURIComponent","prepare","status","authorized","scanSub","scan","text","joinTeam","unsubscribe","e","console","log","selector","template"],"mappings":"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","file":"default~pages-event-event-module~pages-home-home-module~pages-join-team-join-team-module~pages-messa~bc0a7827-es5.js","sourcesContent":["export default \"\\n<div [style.background]=\\\"'transparent'\\\" class=\\\"backgroundMask\\\"></div>\\n<div class=\\\"coverBackground\\\" *ngIf=\\\"this.keyboardUp\\\"></div>\\n<ion-header>\\n  <ion-toolbar color=\\\"navbar-theme\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"back()\\\">\\n        <ion-icon color=\\\"white\\\" name=\\\"close-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"white\\\">{{\\\"JOINTEAM.TITLE\\\" | translate}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content >\\n  <canvas #canvas></canvas>\\n  <p *ngIf=\\\"!this.keyboardUp && !this.coach\\\" class=\\\"instructions\\\">{{\\\"JOINTEAM.0\\\" | translate}}</p>\\n  <p *ngIf=\\\"!this.keyboardUp && this.coach\\\" class=\\\"instructions\\\">{{\\\"JOINTEAM.0\\\" | translate}}</p>\\n  <div [style.height.px]=\\\"height\\\" class=\\\"camerabox\\\"></div>\\n  <p *ngIf=\\\"!this.keyboardUp\\\" class=\\\"or\\\">{{\\\"JOINTEAM.1\\\" | translate}}</p>\\n  <ion-input [(ngModel)]=\\\"url\\\" #urlInput class=\\\"link\\\" placeholder=\\\"paste invitation link\\\" expand=\\\"block\\\" [value]=\\\"url\\\"></ion-input>\\n  <ion-button (click)=\\\"joinTeam()\\\" class=\\\"joinButton\\\" expand=\\\"block\\\">{{\\\"JOINTEAM.2\\\" | translate}}</ion-button>\\n</ion-content>\\n\";","export default \"html, body, ion-app, div.nav-decor, .ion-content, .app-root {\\n  background-color: transparent !important;\\n}\\n\\n.nav-decor, ion-app {\\n  background-color: transparent !important;\\n}\\n\\nion-content {\\n  --background: transparent;\\n}\\n\\ncanvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  z-index: -10;\\n  opacity: 0;\\n}\\n\\n.backgroundMask {\\n  top: 0px;\\n  left: 0px;\\n  position: fixed;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n.backgroundMask:after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 190px;\\n  left: 50%;\\n  bottom: 200px;\\n  max-height: 300px;\\n  border-radius: 4px;\\n  width: calc(100% - 100px);\\n  box-shadow: 0px 0px 0px 2000px white;\\n  transform: translateX(-50%);\\n}\\n\\n.instructions {\\n  font-size: 20px;\\n  margin: 20px 50px 0px 50px;\\n  color: gray;\\n}\\n\\n.or {\\n  text-align: center;\\n  margin: 40px 20px 20px 20px;\\n  color: lightslategray;\\n}\\n\\n.link {\\n  border-radius: 8px;\\n  width: auto;\\n  background-color: #f0f0f0;\\n  margin: 20px;\\n  color: gray;\\n  --padding-start: 10px;\\n  --padding-end: 10px;\\n}\\n\\n.coverBackground {\\n  top: 0px;\\n  left: 0px;\\n  position: fixed;\\n  height: 100%;\\n  width: 100%;\\n  background-color: white;\\n}\\n\\n.joinButton {\\n  margin: 20px;\\n  --background: #25E481;\\n}\\n\\n.camerabox {\\n  width: 20px;\\n  opacity: 0;\\n}\\n\\n.input-code {\\n  --padding-start: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZHJpZW50cmFoYW4vRGVza3RvcC9UZWFtY2xhcC9UZWFtQ2xhcC9zcmMvYXBwL3BhZ2VzL2pvaW4tdGVhbS9qb2luLXRlYW0ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9qb2luLXRlYW0vam9pbi10ZWFtLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUE4RCx3Q0FBQTtBQ0U5RDs7QUREQTtFQUFvQix3Q0FBQTtBQ0twQjs7QURKQTtFQUNJLHlCQUFBO0FDT0o7O0FETEE7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7QUNRSjs7QUROQTtFQUNJLFFBQUE7RUFDQSxTQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0FDU0o7O0FEUEE7RUFDSSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxvQ0FBQTtFQUNBLDJCQUFBO0FDVUo7O0FEUkE7RUFDSSxlQUFBO0VBQ0EsMEJBQUE7RUFDQSxXQUFBO0FDV0o7O0FEUkE7RUFDSSxrQkFBQTtFQUNBLDJCQUFBO0VBQ0EscUJBQUE7QUNXSjs7QURUQTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxxQkFBQTtFQUNBLG1CQUFBO0FDWUo7O0FEVkE7RUFDSSxRQUFBO0VBQ0EsU0FBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLHVCQUFBO0FDYUo7O0FEVkE7RUFDSSxZQUFBO0VBQ0EscUJBQUE7QUNhSjs7QURWQTtFQUNJLFdBQUE7RUFDQSxVQUFBO0FDYUo7O0FEWEE7RUFDSSxxQkFBQTtBQ2NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvam9pbi10ZWFtL2pvaW4tdGVhbS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJodG1sLCBib2R5LCBpb24tYXBwLCBkaXYubmF2LWRlY29yLCAuaW9uLWNvbnRlbnQsIC5hcHAtcm9vdCB7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IH1cbi5uYXYtZGVjb3IsaW9uLWFwcHsgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsgfVxuaW9uLWNvbnRlbnR7XG4gICAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbn1cbmNhbnZhc3tcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IC0xMDtcbiAgICBvcGFjaXR5OiAwLjA7XG59XG4uYmFja2dyb3VuZE1hc2t7XG4gICAgdG9wOiAwcHg7XG4gICAgbGVmdDogMHB4O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgd2lkdGg6IDEwMCU7XG59XG4uYmFja2dyb3VuZE1hc2s6YWZ0ZXJ7XG4gICAgY29udGVudDonJztcbiAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICB0b3A6IDE5MHB4O1xuICAgIGxlZnQ6NTAlOyBcbiAgICBib3R0b206IDIwMHB4O1xuICAgIG1heC1oZWlnaHQ6IDMwMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6NHB4O1xuICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAxMDBweCk7IFxuICAgIGJveC1zaGFkb3c6IDBweCAwcHggMHB4IDIwMDBweCB3aGl0ZTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG59XG4uaW5zdHJ1Y3Rpb25ze1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBtYXJnaW46IDIwcHggNTBweCAwcHggNTBweDtcbiAgICBjb2xvcjogZ3JheTtcbn1cblxuLm9ye1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW46IDQwcHggMjBweCAyMHB4IDIwcHg7XG4gICAgY29sb3I6IGxpZ2h0c2xhdGVncmF5O1xufVxuLmxpbmt7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XG4gICAgbWFyZ2luOiAyMHB4O1xuICAgIGNvbG9yOiBncmF5O1xuICAgIC0tcGFkZGluZy1zdGFydDogMTBweDtcbiAgICAtLXBhZGRpbmctZW5kOiAxMHB4O1xufVxuLmNvdmVyQmFja2dyb3VuZHtcbiAgICB0b3A6IDBweDtcbiAgICBsZWZ0OiAwcHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cblxuLmpvaW5CdXR0b257XG4gICAgbWFyZ2luOiAyMHB4O1xuICAgIC0tYmFja2dyb3VuZDogIzI1RTQ4MTtcbn1cblxuLmNhbWVyYWJveHtcbiAgICB3aWR0aDogMjBweDtcbiAgICBvcGFjaXR5OiAwLjA7XG59XG4uaW5wdXQtY29kZXtcbiAgICAtLXBhZGRpbmctc3RhcnQ6IDIwcHg7XG59IiwiaHRtbCwgYm9keSwgaW9uLWFwcCwgZGl2Lm5hdi1kZWNvciwgLmlvbi1jb250ZW50LCAuYXBwLXJvb3Qge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuXG4ubmF2LWRlY29yLCBpb24tYXBwIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cblxuaW9uLWNvbnRlbnQge1xuICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufVxuXG5jYW52YXMge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHotaW5kZXg6IC0xMDtcbiAgb3BhY2l0eTogMDtcbn1cblxuLmJhY2tncm91bmRNYXNrIHtcbiAgdG9wOiAwcHg7XG4gIGxlZnQ6IDBweDtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uYmFja2dyb3VuZE1hc2s6YWZ0ZXIge1xuICBjb250ZW50OiBcIlwiO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTkwcHg7XG4gIGxlZnQ6IDUwJTtcbiAgYm90dG9tOiAyMDBweDtcbiAgbWF4LWhlaWdodDogMzAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDEwMHB4KTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMjAwMHB4IHdoaXRlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG59XG5cbi5pbnN0cnVjdGlvbnMge1xuICBmb250LXNpemU6IDIwcHg7XG4gIG1hcmdpbjogMjBweCA1MHB4IDBweCA1MHB4O1xuICBjb2xvcjogZ3JheTtcbn1cblxuLm9yIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW46IDQwcHggMjBweCAyMHB4IDIwcHg7XG4gIGNvbG9yOiBsaWdodHNsYXRlZ3JheTtcbn1cblxuLmxpbmsge1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIHdpZHRoOiBhdXRvO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xuICBtYXJnaW46IDIwcHg7XG4gIGNvbG9yOiBncmF5O1xuICAtLXBhZGRpbmctc3RhcnQ6IDEwcHg7XG4gIC0tcGFkZGluZy1lbmQ6IDEwcHg7XG59XG5cbi5jb3ZlckJhY2tncm91bmQge1xuICB0b3A6IDBweDtcbiAgbGVmdDogMHB4O1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xufVxuXG4uam9pbkJ1dHRvbiB7XG4gIG1hcmdpbjogMjBweDtcbiAgLS1iYWNrZ3JvdW5kOiAjMjVFNDgxO1xufVxuXG4uY2FtZXJhYm94IHtcbiAgd2lkdGg6IDIwcHg7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5pbnB1dC1jb2RlIHtcbiAgLS1wYWRkaW5nLXN0YXJ0OiAyMHB4O1xufSJdfQ== */\";","import { Component, OnInit, ViewChild, ElementRef, ChangeDetectorRef, ÉµCodegenComponentFactoryResolver } from '@angular/core';\nimport { ModalController, LoadingController, AlertController } from '@ionic/angular';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { CameraPreview, CameraPreviewPictureOptions, CameraPreviewOptions, CameraPreviewDimensions } from '@ionic-native/camera-preview/ngx';\nimport { call } from 'src/app/functions/call';\nimport { Route } from '@angular/compiler/src/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { get } from 'src/app/functions/storage';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'app-join-team',\n  templateUrl: './join-team.page.html',\n  styleUrls: ['./join-team.page.scss'],\n})\nexport class JoinTeamPage implements OnInit {\n  height = 0;\n  keyboardUp = true;\n  url = \"\";\n  playerId = \"\";\n  mustGoBack = false;\n  coach = false;\n  @ViewChild('canvas') canvas: ElementRef;\n  @ViewChild('urlInput') urlInput: ElementRef;\n  constructor(private translate: TranslateService, public alertController: AlertController, private modal: ModalController, private qrScanner: QRScanner, private cameraPreview: CameraPreview, private sanitizer: DomSanitizer, private cd: ChangeDetectorRef, public loadingController: LoadingController, private route: ActivatedRoute) {\n    this.route.queryParams.subscribe((queryParams) => {\n      if (queryParams && queryParams.playerId){\n        this.playerId = queryParams.playerId;\n\n      }else{\n        this.coach = true;\n      }\n    })\n  }\n\n  ngOnInit() {\n  }\n  back(){\n    this.modal.dismiss();\n  }\n  \n  async ionViewDidEnter(){\n    if (this.mustGoBack){\n      this.back();\n      this.mustGoBack = false;\n      return;\n    }\n    const cameraPreviewOpts: CameraPreviewOptions = {\n      x: 50,\n      y: 150,\n      width: (this.canvas.nativeElement.getBoundingClientRect().width - 100),\n      height: Math.min(this.canvas.nativeElement.getBoundingClientRect().height - 350, 300),\n      camera: 'rear',\n      tapPhoto: true,\n      previewDrag: true,\n      toBack: true,\n      alpha: 1\n    }\n    this.height = Math.min(this.canvas.nativeElement.getBoundingClientRect().height - 250, 300);\n    this.cameraPreview.startCamera(cameraPreviewOpts).then((res) => {\n      this.keyboardUp = false;\n      this.startScanning();\n    }).catch((err) => {\n      this.keyboardUp = false;\n      this.startScanning();\n    });\n  }\n  ionViewWillLeave(){\n    this.cameraPreview.stopCamera();\n  }\n  ionViewDidLeave(){\n    this.cameraPreview.stopCamera();\n    this.cameraPreview.hide()\n  }\n  async joinTeam(){\n    let loading = await this.presentLoading();\n    this.cameraPreview.stopCamera();\n    this.cameraPreview.hide();\n    let params = this.getParams(this.url);\n    if (!this.url.includes(\".\")){\n      params[\"teamId\"] = this.url.split(\"-\")[0];\n      params[\"invitecode\"] = this.url.split(\"-\")[1];\n    }\n    params[\"playerId\"] = this.playerId;\n    params[\"token\"] = await get(\"token\");\n    \n    if (this.coach){\n      let response : any = await call(\"http://192.168.2.251:3000/api/joinPending\", params);\n      try{\n        if (response == \"done\"){\n          const alert = await this.alertController.create({\n            cssClass: 'my-custom-class',\n            header: this.translate.instant(\"ALERTS.5.TITLE\"),\n            message: this.translate.instant(\"ALERTS.5.MESSAGE\"),\n            buttons: [this.translate.instant(\"ALERTS.5.BUTTONS.0\")]\n          });\n          this.modal.dismiss();\n          alert.present();\n        }\n      }catch(error){\n      }\n      loading.dismiss();\n    }else{\n      let response : any = await call(\"http://192.168.2.251:3000/api/joinTeam\", params);\n      try{\n        response = JSON.parse(response);\n        if (response.id){\n          this.modal.dismiss(response);\n        }else{\n          throw response;\n        }\n      }catch(error){\n  \n      }\n      loading.dismiss();\n    }\n    loading.dismiss();\n  }\n  getParams(url) {\n    var params = {};\n    var parser = document.createElement('a');\n    parser.href = url;\n    var query = parser.search.substring(1);\n    var vars = query.split('&');\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split('=');\n      params[pair[0]] = decodeURIComponent(pair[1]);\n    }\n    return params;\n  };\n  startScanning(){\n    this.qrScanner.prepare().then((status: QRScannerStatus) => {\n      if (status.authorized) {\n        let scanSub = this.qrScanner.scan().subscribe((text: string) => {\n          this.url = text;\n          this.joinTeam();\n          this.qrScanner.hide();\n          scanSub.unsubscribe();\n        });\n\n      } \n    }).catch((e: any) => console.log('Error is', e));\n  }\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: this.translate.instant(\"ALERTS.13.MESSAGE\"),\n    });\n    await loading.present();\n    return loading;\n  }\n}\n\n"]}